<div class="register-container">
  <div class="background-image"></div>

  <mat-card class="register-patient-card">

    <div class="logo-container">
      <img [src]="'assets/images/logo-oncontigo.png'" alt="Logo OnContigo" class="logo">
    </div>

    <mat-card-header class="card-header">
      <mat-card-title class="card-title">Registro de Paciente</mat-card-title>
      <mat-card-subtitle class="card-subtitle">Completa los campos para registrarte</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <!-- Sección de imagen de perfil (centrada arriba) -->
        <div class="profile-image-section">
          <div class="image-preview" *ngIf="imagePreview; else placeholder">
            <img [src]="imagePreview" alt="Preview de imagen de perfil">
            <button mat-icon-button class="remove-image" (click)="removeImage()" type="button">
              <mat-icon>close</mat-icon>
            </button>
          </div>

          <ng-template #placeholder>
            <div class="image-placeholder">
              <mat-icon>account_circle</mat-icon>
              <span>Foto de perfil</span>
            </div>
          </ng-template>

          <div class="image-upload-container">
            <input
              #fileInput
              type="file"
              id="fileInput"
              accept="image/*"
              (change)="onImagePicked($event)"
              style="display: none;">
            <button
              mat-stroked-button
              type="button"
              class="upload-button"
              (click)="fileInput.click()">
              <mat-icon>cloud_upload</mat-icon>
              Seleccionar imagen
            </button>
            <span class="image-requirements">Formatos: JPG, PNG (Max. 2MB)</span>
          </div>
        </div>

        <!-- Contenedor de dos columnas -->
        <div class="two-columns-container">
          <!-- Columna izquierda -->
          <div class="form-column">
            <!-- Nombre -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>Nombre</mat-label>
              <input matInput formControlName="firstname" />
              <mat-icon matSuffix>person</mat-icon>
              <mat-error *ngIf="registerForm.get('firstname')?.hasError('required')">
                El nombre es obligatorio.
              </mat-error>
            </mat-form-field>

            <!-- Email -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>Email</mat-label>
              <input matInput formControlName="email" type="email" />
              <mat-icon matSuffix>email</mat-icon>
              <mat-error *ngIf="registerForm.get('email')?.hasError('required')">
                El correo es obligatorio.
              </mat-error>
              <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
                Ingresa un correo válido.
              </mat-error>
            </mat-form-field>

            <!-- Ciudad -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>Ciudad</mat-label>
              <input matInput formControlName="city" />
              <mat-icon matSuffix>location_city</mat-icon>
              <mat-error *ngIf="registerForm.get('city')?.hasError('required')">
                La ciudad es obligatoria.
              </mat-error>
            </mat-form-field>

            <!-- Fecha de Nacimiento -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>Fecha de Nacimiento</mat-label>
              <input matInput formControlName="birthDate" type="date" />
              <mat-icon matSuffix>cake</mat-icon>
              <mat-error *ngIf="registerForm.get('birthDate')?.hasError('required')">
                La fecha de nacimiento es obligatoria.
              </mat-error>
            </mat-form-field>

            <!-- Teléfono -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>Teléfono</mat-label>
              <input matInput formControlName="phone" />
              <mat-icon matSuffix>phone</mat-icon>
              <mat-error *ngIf="registerForm.get('phone')?.hasError('required')">
                El teléfono es obligatorio.
              </mat-error>
            </mat-form-field>

            <!-- DESCRIPCIÓN -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>Descripción</mat-label>
              <textarea matInput formControlName="description" ></textarea>
              <mat-icon matSuffix>notes</mat-icon>
              <mat-error *ngIf="registerForm.get('description')?.hasError('required')">
                La descripción es obligatoria.
              </mat-error>
            </mat-form-field>
          </div>


          <!-- Columna derecha -->
          <div class="form-column">
            <!-- Apellido -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>Apellido</mat-label>
              <input matInput formControlName="lastname" />
              <mat-icon matSuffix>person_outline</mat-icon>
              <mat-error *ngIf="registerForm.get('lastname')?.hasError('required')">
                El apellido es obligatorio.
              </mat-error>
            </mat-form-field>

            <!-- Contraseña -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>Contraseña</mat-label>
              <input matInput formControlName="password" type="password" />
              <mat-icon matSuffix>lock</mat-icon>
              <mat-error *ngIf="registerForm.get('password')?.hasError('required')">
                La contraseña es obligatoria.
              </mat-error>
              <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">
                La contraseña debe tener al menos 8 caracteres.
              </mat-error>
            </mat-form-field>

            <!-- País -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>País</mat-label>
              <input matInput formControlName="country" />
              <mat-icon matSuffix>public</mat-icon>
              <mat-error *ngIf="registerForm.get('country')?.hasError('required')">
                El país es obligatorio.
              </mat-error>
            </mat-form-field>

            <!-- DNI -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>DNI</mat-label>
              <input matInput formControlName="dni" />
              <mat-icon matSuffix>badge</mat-icon>
              <mat-error *ngIf="registerForm.get('dni')?.hasError('required')">
                El DNI es obligatorio.
              </mat-error>
            </mat-form-field>

            <!-- EXPERIENCIA -->
            <mat-form-field appearance="fill" class="modern-field">
              <mat-label>Años de Experiencia</mat-label>
              <input matInput formControlName="dni" />
              <mat-icon matSuffix>experience</mat-icon>
              <mat-error *ngIf="registerForm.get('experience')?.hasError('required')">
                La experiencia es obligatoria.
              </mat-error>
            </mat-form-field>



          </div>
        </div>

        <!-- Botones de acción -->
        <div class="form-actions">
          <button mat-raised-button color="primary" type="submit" class="submit-button">
            <mat-icon>how_to_reg</mat-icon>
            Registrar
          </button>
          <button mat-stroked-button type="button" (click)="goBack()" class="cancel-button">
            <mat-icon>cancel</mat-icon>
            Cancelar
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>

